#includepath "~/Documents/;%USERPROFILE%Documents";
#include "basiljs/bundle/basil.js";

var rawData = "i feel good! zachbachiri Simultaneously inspired and frustrated - so much that it keeps me awake. zachbachiri Ready zachbachiri Lost zachbachiri I feel a little tired and hungry and stoned zachbachiri It varies, but currently alright. zachbachiri I cut my own hair yesterday and I really feel like no one really likes it. I feel real angry sometimes as well but also sometimes just the best, I'm not sure how I really feel but I hope that you feel happy. zachbachiri actually pretty good. been teaching music, playing a few shows and living in Austin texas. zachbachiri Sad. But ain't that how it always goes. zachbachiri idk rn I'm feeling pretty good zachbachiri Almost completely in love  zachbachiri i feel homesick or maybe just hungry zachbachiri Bloated and sad and medicated and fine zachbachiri Proud to be a Melbournian whenever I hear the talent that comes out of our city zachbachiri I little bit tired and hungry, but ready to get off work and have some fun. zachbachiri Right now I feel a little worn out from my kids not settling down tonight and letting my wife and I relax a bit after working all day.  zachbachiri Today will be a better day. If yesterday was good, then today will be just as good if not better. zachbachiri  Most days 'What you once were is not what you want to be, anymore' applies zachbachiri I got a toothache and just discovered I missed the new CB album announcement and have two new songs to listen to. Kinda making me forget about the toothache. zachbachiri Abandoned, but forced to go through the motions of belonging. zachbachiri stressed zachbachiri Lethargic and stuck zachbachiri A placeholder person for a clone or someone just like me zachbachiri I feel like im hiding from myself, hiding my love for art, hiding my weirdo shit, because of fear to fail, that same fear that one day i will dissappear. zachbachiri Best described via emojis (insert relevant emojis) zachbachiri It's kind of like a mad jumble. It all moves so fast. Bouncing around my head. I'm trying to slow it down so I can focus on that things are actually really good for me right now. zachbachiri Defective at best zachbachiri I feel like a mother waiting to hold her baby for the first time, like a child waiting for her mother after school. zachbachiri I feel okay, had a falling out with an old friend but a new one cemented her status as my favorite person. So not bad.  zachbachiri skeptical. zachbachiri chuffed zachbachiri Depressed and longing for love zachbachiri I feel insanely relieved that I will get to see CB in Denver on NOT ELECTION NIGHT so I can enjoy the show without the deathly fear of impending doom. Well, the doom is still here. We've just learned to live with it. Maybe that's worse. zachbachiri bleh, man zachbachiri Content but fragile zachbachiri melancholic and sad zachbachiri I feel like no one my age knows what good music is.. and thinks I'm crazy for liking a lot of music and I also feel like no one is praying for me zachbachiri Like listening to the Fall zachbachiri I'm tired. Working two jobs really takes it out of you. I love my wife and dog though, so at the end of the day it's a contented kind of tired. Also the rum helps. zachbachiri Satisfied! zachbachiri I feel so anxious about my graduation design project!! It cause too many pressure zachbachiri like i’m waiting for something to happen and for things to get better and it doesn’t  zachbachiri I feel like I'm falling apart just a little bit, I haven't seen my partner in a month and I won't for another two zachbachiri certainly uncertain about who's behind the curtain zachbachiri i'm feeling a little sleepy, tbh. but mostly excited about some new cb tunes! zachbachiri Just a bit stressed. I am writing a play for high schools across Australia about anti bullying  and the theatre company I am working with wants it by Friday. I should get it done though zachbachiri Gassy zachbachiri I feel like things can tear apart really easily, but at the moment I feel okay and that's something to hold on to. zachbachiri I'm alright. zachbachiri Riding a number 12 tram into Melbourne for White Night, feeling lucky to live in this great city zachbachiri pretty OK zachbachiri anxious zachbachiri I feel sad because my dog is ill. She will probably die in a year or less and she is my best friend. Plus I'm starting to not loving my job anymore. I need a little time now.  zachbachiri Quite shitty, and totally useless at most times zachbachiri nameless, faceless zachbachiri I'm feeling myself grow into something I never wanted to be. zachbachiri I feel great, but... zachbachiri I feel so unsure right now. About everything. It's like I don't really know myself the way I thought I did. zachbachiri I want more winter. zachbachiri Tipsy & confused  zachbachiri I miss my dad zachbachiri I feel fed up with the amount of money I need to pay for post-secondary education. zachbachiri I cannot wait to see another show of yours! zachbachiri Well, I just got home from work and feeling a bit worn down.  My legs are sore from working out the last couple days. And I'm really excited to (possibly) be getting some new music from you! zachbachiri i feel like my whole world is crashing down around me and the least i can do is support others while my life falls to pieces, other than that i feel pretty great. zachbachiri Cake in the oven and German in my brain. zachbachiri Wondering where all the time goes. zachbachiri Not all that great. Worried about the socio-political environment in the world. And I'm hungry and could use some caffeine. zachbachiri I saw some of these are going up on street walls. Hi mum! zachbachiri I am actually really scared of people??? like I just want to be chill but fuck socializing is so hard sometimes. That's why I'm so grateful for my friends.  zachbachiri Overlooked. zachbachiri I feel like my internally mood is pouring rain I FEEL FREE zachbachiri i feel like shit zachbachiri Blissfull when I hear your voice. zachbachiri Drowsy zachbachiri i feel like i can grow as tall as a tree if i really wanted to. but i dont really want to, im fine with how tall i am right now zachbachiri caustic. deserted. spirited. lethargic. paradoxical. sympathetic. callous. devoted. diffident. silly. open. zachbachiri Stressed out. Too much to do, too little time to do it. Just on the verge of losing it... zachbachiri At the moment, I feel happy & really comfortable in my own skin. Which is to say there are a lot of times I'm not. zachbachiri Mainly overwhelmed & wavy ‚ floating around pretty untethered, too much drinking, too many feelings. Lol!  zachbachiri Glowing zachbachiri pretty good I guess thanks for asking, how are you? zachbachiri Like the trees of a battlefield. Stuck in the moment, catching the crossfire, patiently waiting for death so I can go back to worshipping the sun. zachbachiri Drunk and empty. zachbachiri irreparably broken zachbachiri Full zachbachiri I am treading water zachbachiri I feel empty. Like I will never find what makes me feel whole. zachbachiri Sometimes I feel bad, sometimes I feel good. I guess the power of choice's in my own hands, I guess I never thought it would be.  zachbachiri The depression is preventing me from from feeling anything, really.  zachbachiri I feel unwanted zachbachiri I feel sad & a little depressed but I know that this feeling will go away and it's not forever. :) zachbachiri I feel angry and sad and I'm fed up with all this fuckin nonsense! zachbachiri I feel like nobody gives me time anymore. I’m ever so lonely. zachbachiri I feel like I should have died instead of my mom zachbachiri These things make me happy zachbachiri feelin' pretty damn good! zachbachiri I'M FUCKING PUMPED IF THIS IS A NEW ALBUM. THAT'S HOW I FUCKING FEEL! zachbachiri good zachbachiri I am a bisexual girl in a long term relationship with a man but I ache for the touch and love of a woman  zachbachiri Pretty angry and stressed right now. House-Hunting in Dublin is soul-crushingly annoying when you've been landed in this situation rather than willingly looking to move house on your own terms. zachbachiri Cooped up and tired zachbachiri Anxious and restless.  Reality of divorce and absent husband kicking in. It feels real. Not a holiday anymore. after relief of getting away, pause to rest, now finding myself. Shit scary, empty, humbling. Like leaning over a cliff, alone, breathing zachbachiri Crappy zachbachiri It was a long, bumpy road for my wife and I to be able to be together. But I did whatever I had to do, including driving a lemon of a car across the country, to be with her. zachbachiri Good zachbachiri I'm still in love with Rosalie zachbachiri hungover zachbachiri thoughtful zachbachiri I'm just waiting for life to start, but it won't start until I've figured out what I want. zachbachiri Happy where I am but still restless and puzzled by the concept of 'feeling at home'. zachbachiri Feeling a little sleepy, but I hope the sugar rush will kick in real soon. zachbachiri sleepy, sad, reminiscient  zachbachiri anxious zachbachiri Most of the time I feel too sad to cry but when I'm thinking about you and listening to your music it's okay. zachbachiri I don't know man, its like I'm not even living sometimes... zachbachiri I used to hate myself, but now I think I'm alright. zachbachiri My head hurts but the migraine has stopped for now. It might come back but I won't know 'till tomorrow zachbachiri Trapped. My mind, ideas and aspirations are trapped in a body suffering crippling anxiety and depression. So many goals, so little enthusiasm to see them through. zachbachiri I seem to think a lot about the things that I forgot to do, and all the times I had a chance to. Please don't confront me with my failures, I had not forgotten them. Nico is how I feel right now. zachbachiri Feel ready for a new Courtney Barnett album... zachbachiri I feel under-appreciated. zachbachiri Fucking EXCITED about this song zachbachiri sometimes like a pitcher with only half of the good stuff, trying to get a feel; sometimes the baseball, rocking and wobbling home zachbachiri Wishing I wasn't broke but really its been a lovely day. The cat jumped up on the sofa when I asked her to. zachbachiri stressed, because I should be writing a midterm paper on subjects and citizens but I am on this website instead  zachbachiri I feel a little misunderstood but it's all right; it is always all right. zachbachiri I can't say zachbachiri Tired, excited, anxious, happy, lucky zachbachiri Cautiously optimistic about the day ahead zachbachiri Tired of the internet zachbachiri Wish I knew zachbachiri inundated by imposter syndrome zachbachiri I'm in love. zachbachiri sleepy, sad, reminiscient  zachbachiri Anxious zachbachiri I feel complacent. zachbachiri I feel like punching a wall. but I can't because I punched one last night and now my hand is black and blue. zachbachiri sleepy af zachbachiri dead tired of the rat race zachbachiri I am almost done with school, but not sure what to do about it. I have a girl whom I love, but I'm not sure if she loves me back.  zachbachiri Undermined  zachbachiri Pulchritudinous. zachbachiri I feel...not much at the moment if we're being honest zachbachiri Stoked zachbachiri Sometimes I feel really outside myself, but inside everything. I find the paradox interestingly funny and tend to roll with it, as it doesn't scare me much anymore. zachbachiri idk rn I'm feeling pretty good zachbachiri Great! zachbachiri Feliz, porque al fin podre escuchar el nuevo disco zachbachiri I feel unsure what to write zachbachiri urgh zachbachiri Cooped up and tired zachbachiri I'm feeling fucking shit,,, I'm going through a breakup, if you can even call it that, I just wanna destroy my phone and move to like Fiji or somethin. Fuck. I'm excited for your new song.  zachbachiri I'm pretty tired, just got home from the restaurant I work at. zachbachiri I feel oppressed. Tired of not telling people what I really think about them. Especially my family. zachbachiri I don't know what I want to make with my life, I'm 23 and I feel like it's too late zachbachiri Wired zachbachiri Slightly bloated, with a weird rash I'm worried about. zachbachiri holy shit i love you zachbachiri God zachbachiri I feel like running through that brick wall to get to the other side. But I also feel like laying down next to the wall and taking a nap. Maybe I'll take a quick nap then climb over the wall. zachbachiri Lovely zachbachiri i feel like i get so wrapped up in orbiting the miniature universe that is my friend group that i forget that we're not a representative sample of the whole population. it's weird to be reminded that we're in the minority zachbachiri Melancholic zachbachiri Anxious. zachbachiri I am curious and let down and happy zachbachiri with my hands usually. actually no, melancholic. zachbachiri I'm feeling pretty great zachbachiri Bored, Courtney. I need something in sync with boredom, something witty and stupid at the same time ie your new album. Please.  zachbachiri I feel like the end is near zachbachiri I can't tell if I'm sad or if I need to book an eye test zachbachiri Anxious zachbachiri Tired & Gay. zachbachiri oh boy....I feel STOKED if this means you're putting out new tunes!!!!!! but in all seriousness you're the rockstar I want to be zachbachiri Fucking amazing. zachbachiri Your hair looks really cool. Like the bangs part of it I mean. And I love the way you use words. zachbachiri I really feel I need a haircut. zachbachiri I'm uncertain about my future: where I'll be living, who I'll be dating, whether or not I'll still have the same friends. I'm afraid of everything that's going on in the world. zachbachiri My head hurts, and I'm just feeling a little sick right now, but otherwise Generally uncomfortable zachbachiri halfway between miserable and exhilarating. zachbachiri a little giddy! zachbachiri I want to create something beautiful zachbachiri Able, powerful and ready ... yet afraid, alone and helpless zachbachiri " + 
"Crappy zachbachiri Good zachbachiri I'm still in love with Rosalie zachbachiri hungover zachbachiri thoughtful zachbachiri I'm just waiting for life to start, but it won't start until I've figured out what I want. zachbachiri Happy where I am but still restless and puzzled by the concept of 'feeling at home'. zachbachiri Feeling a little sleepy, but I hope the sugar rush will kick in real soon. zachbachiri sleepy, sad, reminiscient zachbachiri anxious zachbachiri Most of the time I feel too sad to cry but when I'm thinking about you and listening to your music it's okay. zachbachiri I don't know man, its like I'm not even living sometimes... zachbachiri I used to hate myself, but now I think I'm alright. zachbachiri My head hurts but the migraine has stopped for now. It might come back but I won't know 'till tomorrow zachbachiri Feel ready for a new Courtney Barnett album... zachbachiri I feel under-appreciated. zachbachiri Fucking EXCITED about this song zachbachiri sometimes like a pitcher with only half of the good stuff, trying to get a feel; sometimes the baseball, rocking and wobbling home zachbachiri Wishing I wasn't broke but really its been a lovely day. The cat jumped up on the sofa when I asked her to. zachbachiri stressed, because I should be writing a midterm paper on subjects and citizens but I am on this website instead zachbachiri I feel a little misunderstood but it's all right; it is always all right. zachbachiri I can't say zachbachiri Tired, excited, anxious, happy, lucky zachbachiri Cautiously optimistic about the day ahead zachbachiri Tired of the internet zachbachiri Wish I knew zachbachiri inundated by imposter syndrome zachbachiri I'm in love. zachbachiri sleepy, sad, reminiscient zachbachiri Anxious zachbachiri I feel complacent. zachbachiri I feel like punching a wall. but I can't because I punched one last night and now my hand is black and blue. zachbachiri sleepy af zachbachiri dead tired of the rat race zachbachiri I am almost done with school, but not sure what to do about it. I have a girl whom I love, but I'm not sure if she loves me back. zachbachiri Undermined zachbachiri Pulchritudinous. zachbachiri I feel...not much at the moment if we're being honest zachbachiri Stoked zachbachiri Sometimes I feel really outside myself, but inside everything. I find the paradox interestingly funny and tend to roll with it, as it doesn't scare me much anymore. zachbachiri idk rn I'm feeling pretty good zachbachiri Great! zachbachiri Feliz, porque al fin podre escuchar el nuevo disco zachbachiri I feel unsure what to write zachbachiri urgh zachbachiri Cooped up and tired zachbachiri I'm pretty tired, just got home from the restaurant I work at. zachbachiri I don't know what I want to make with my life, I'm 23 and I feel like it's too late zachbachiri Wired zachbachiri Slightly bloated, with a weird rash I'm worried about. zachbachiri holy shit i love you zachbachiri God zachbachiri Lovely zachbachiri Melancholic zachbachiri Anxious. zachbachiri I am curious and let down and happy zachbachiri with my hands usually. actually no, melancholic. zachbachiri I'm feeling pretty great zachbachiri Bored, Courtney. I need something in sync with boredom, something witty and stupid at the same time ie your new album. Please. zachbachiri I feel like the end is near zachbachiri I can't tell if I'm sad or if I need to book an eye test zachbachiri Anxious zachbachiri Tired & Gay. zachbachiri oh boy....I feel STOKED if this means you're putting out new tunes!!!!!! but in all seriousness you're the rockstar I want to be zachbachiri Fucking amazing. zachbachiri Your hair looks really cool. Like the bangs part of it I mean. And I love the way you use words. zachbachiri I really feel I need a haircut. zachbachiri My head hurts, and I'm just feeling a little sick right now, but otherwise Generally uncomfortable zachbachiri halfway between miserable and exhilarating. zachbachiri a little giddy! zachbachiri I want to create something beautiful zachbachiri Able, powerful and ready ... yet afraid, alone and helpless zachbachiri Everyone is equal but different and we should celebrate that difference, it's what makes life interesting zachbachiri Hi I feel strong and also tired. If I could only listen to your music for the rest of my life I would die happy zachbachiri Everything is beautiful, truly you are special.. zachbachiri I really feel like one day reality is going to crack and everything i know to be logical and real will begin to unravel into chaos. zachbachiri Where is your website? zachbachiri My life feels like a dream and my dog is being really mean. I wonder what discotechs used to feel like. zachbachiri Tired. zachbachiri Feeling excited for new music! zachbachiri Stuck under a rock, lost without any belief as to what the world has before me but content with what i do have. zachbachiri I feel iraa zachbachiri Swallowed by stress, stressed out about making something of myself zachbachiri Ready to hit snooze all weekend zachbachiri I want to buy a Courtney Tshirt. Maybe a little tipsy but I’ll find my way. zachbachiri Feel ready for a new Courtney Barnett album... zachbachiri cloudy, hopeless, heavy vested, hopeful, happy, uneasy, distant, loved zachbachiri Tired, Hungry and Alive zachbachiri Lonely but fairly chill about it zachbachiri I feel like I’m doing the right thing in life, but I don’t think it’s going to be as big as I want it to be. Trying to remember its in the little things. zachbachiri Mega Excited for new album! zachbachiri I feel like some misplaced Joan of Arc, protecting my younger brother from this dark, twisted, world. zachbachiri I really feel like im failing my way to the top. zachbachiri I feel empty. Like I will never find what makes me feel whole. zachbachiri I feel as though I'm not achieving my potential zachbachiri I don't entirely know what this is but I'm excited nonetheless. zachbachiri Like smooth butter zachbachiri I'm absolutely I'm love. We adopted a little kitten and he's just the cutest! zachbachiri Tired, but happy. Wish I slept more though. zachbachiri strange, girl. so many things have changed. every thing is new. thinking. seeing (me, others), hearing. let see what happen next. peace! zachbachiri brokenhearted. melancholic. waiting for something to happen zachbachiri Tired and sad. zachbachiri Super pumped! zachbachiri I've been sick all week and I'm feeling pretty tired of it!!! zachbachiri hungry zachbachiri I'm pretty good. It was so wonderfull to see you in Bataclan (Paris). Thanks for giving energy to all women. zachbachiri I'm apprehensive about moving cross-country yet also hopeful. But via the magic of music, I know I'll come out the other side in one piece, for which I'm grateful. zachbachiri Excited zachbachiri The depression is preventing me from from feeling anything, really. zachbachiri illegal zachbachiri I feel so unsure right now. About everything. It's like I don't really know myself the way I thought I did. zachbachiri Tired zachbachiri Lazy, lonely, sadistic and full of pancakes. zachbachiri I love your style of song writing. I've never heard much like it before. I wish you continued success. Also thanks for a great show at the Glasshouse Pomona a few years back. zachbachiri Pretty Fucking Awesome! zachbachiri I feel lost. Feeling like waking everyday to feel the same zachbachiri Excited for new music. zachbachiri i feel good about my relationship, but still working on my career. the band i'm in is cool and you are a major influence of ours. keep doing what you do! :) zachbachiri A constant mix of happiness and lonely love I feel great zachbachiri I feel like I'm missing someone who never existed zachbachiri Like everyone secretly hates me. zachbachiri my relationship is starting to destroy me mentally and I don't know what to do, because I love my girlfriend zachbachiri i really feel like a sloth with longer hair zachbachiri I fell like a shadow zachbachiri Feeling a little sleepy, but I hope the sugar rush will kick in real soon. zachbachiri So. F*cking. Exciting.";
var cbData = rawData.split(" zachbachiri ");
var aString = b.loadString("afinn-111.json");
var afinn = b.JSON.decode(aString);
//var colors = [b.color(89, 150, 255), b.color(97, 159, 255), b.color(119, 182, 255), b.color(162, 212, 255), b.color(222, 241, 255), b.color(255, 242, 222), b.color(255, 210, 162), b.color(255, 159, 119), b.color(255, 109, 97), b.color(255, 89, 89)];
var colors = [b.color(89, 133, 255), b.color(89, 126, 255), b.color(89, 114, 255), b.color(89, 96, 255), b.color(107, 89, 255), b.color(141, 89, 255), b.color(184, 89, 255), b.color(238, 89, 255), b.color(255, 89, 150), b.color(255, 89, 92)];


function draw() {
	var cities = [
	{
		"name" : "Portland",
		"date" : "July 26, 2018",
		"location" : "State Theatre",
		"population" : 66882,
		"land_area" : 69.44, //mi^2
		"density" : 963,
		"responses" : cbData,
		"temp" : 81
		//["i feel good!", "Simultaneously inspired and frustrated - so much that it keeps me awake.", "Ready", "Lost", "I feel a little tired and hungry and stoned", "It varies, but currently alright.", "I love you, you're the best", "actually pretty good. been teaching music, playing a few shows and living in Austin texas. how are you?", "Sad. But ain't that how it always goes.", "Almost completely in love", "i feel homesick or maybe just hungry", "I little bit tired and hungry, but ready to get off work and have some fun.", "Right now I feel a little worn out from my kids not settling down tonight and letting my wife and I relax a bit after working all day.", "Today will be a better day. If yesterday was good, then today will be just as good if not better.", "Abandoned, but forced to go through the motions of belonging."]
	} , 
	{
		"name" : "San Diego",
		"date" : "October 3, 2018",
		"location" : "Observatory North Park",
		"population" : 1420000,
		"land_area" : 372.4,
		"density" : 3813,
		"responses" : cbData,
		"temp" : 72
	} , 
	{
		"name" : "Los Angeles",
		"date" : "October 5, 2018",
		"location" : "Greek Theatre",
		"population" : 4000000,
		"land_area" : 503,
		"density" : 7952,
		"responses" : cbData,
		"temp" : 74
	},  
	{
		"name" : "Chicago",
		"date" : "October 18, 2019",
		"location" : "Riviera Theatre",
		"population" : 2687000,
		"land_area" : 234,
		"density" : 11482,
		"responses" : cbData,
		"temp" : 74
	} ,  
	{
		"name" : "Pittsburgh",
		"date" : "October 19, 2019",
		"location" : "Stage AE",
		"population" : 302407,
		"land_area" : 58.35,
		"density" : 5182,
		"responses" : cbData,
		"temp" : 68
	} ,  
	{
		"name" : "Boston",
		"date" : "October 21, 2019",
		"location" : "House of Blues",
		"population" : 685094,
		"land_area" : 89.63,
		"density" : 7643,
		"responses" : cbData,
		"temp" : 66
	} ,
	{
		"name" : "Brooklyn",
		"date" : "October 22, 2018",
		"location" : "Brooklyn Steel",
		"population" : 2649000,
		"land_area" : 69.5,
		"density" : 20000,//actually 38115,
		"responses" : cbData,
		"temp" : 53
	} ,  
	{
		"name" : "Philadelphia",
		"date" : "October 23, 2019",
		"location" : "The Fillmore",
		"population" : 1581000,
		"land_area" : 141.7,
		"density" : 11157,
		"responses" : cbData,
		"temp" : 48
	},  
	{
		"name" : "Nashville",
		"date" : "October 25, 2019",
		"location" : "Marathon Music Works",
		"population" : 667550,
		"land_area" : 526,
		"density" : 1269,
		"responses" : cbData,
		"temp" : 55
	}];




  //Loop through cities
	for (var i = 0; i < cities.length; i++) {
	    b.textFont('DIN 2014\tRegular');
	    b.noStroke();
	    b.rectMode(b.CORNER);
	    b.fill(255,255,255);
	    b.textAlign(Justification.CENTER_ALIGN, VerticalJustification.CENTER_ALIGN);
    	//set grid and text sizes based on density
		var rows = b.round(b.map( cities[i].density, 500, 20000, 20, 45));
		var gridH = b.height / rows;
		var textSize = b.map(rows, 20, 45, 23, 14);
		b.textSize(textSize);

		b.imageMode(b.CENTER);

		var color = colors[b.round(b.map( cities[i].temp, 40, 90, 0, 9))];
		b.fill(color);
		b.rect(0,0,b.width,b.height);
		b.fill(255,255,255);


		for (var j = 2; j<rows-1; j++) {
			var txt = cities[i].responses[b.round(b.random(cities[i].responses.length-1))];
		  	var txtArray = txt.split(/\W/);
		  	var sentiment = getSentiment(txtArray);
		  	var offSetAbs = b.map(sentiment,-5,5,-75,75);
		  	var offSet = b.random(-offSetAbs,offSetAbs);
		  	var rotation = b.map(offSet, -75, 75, -15, 15);

			var img = b.image("cb.jpg", b.width/2, b.height/2, b.width+200, b.height+300);
			img.geometricBounds = [j*gridH,-200, (j+1)*gridH, b.width+200];
			img.rotationAngle = rotation;

			b.rotate(-rotation*0.0174533);
			var txtBox = b.text(txt, 75, j*gridH, b.width-150, gridH);
		  	b.typo(txtBox, "skew", sentiment*10);
		  	b.rotate(rotation*0.0174533);
		}

		var img = b.image("cb.jpg", b.width/2, b.height/2, b.width+200, b.height+300);
		img.geometricBounds = [0,0, gridH*2, b.width];
		b.image("tellmewide.png", b.width/2, gridH, b.min(gridH, 60)*18.6511, b.min(gridH, 60));

		b.fill(color);
		b.text(cities[i].name.toUpperCase() + "    |    " + cities[i].date.toUpperCase() + "    |    " + cities[i].location.toUpperCase(), 50, gridH+(gridH*.1), b.width-100, gridH);
		b.fill(255,255,255);


		var img = b.image("cb.jpg", b.width/2, b.height/2, b.width+200, b.height+300);
		img.geometricBounds = [b.height-gridH,0, b.height, b.width];
		b.image("logo3.png", b.width/2, b.height-(gridH/2), b.min(gridH, 45)*13.41, b.min(gridH, 45));

  		if (i != cities.length-1) b.addPage();
	}


}

b.go();

function getSentiment(x) {
	var score = 0.0;
	var words = 0.0;
	for (var i = 0; i < x.length; i++) {
		if (afinn.hasOwnProperty(x[i].toLowerCase())) {
			score += Number(afinn[x[i].toLowerCase()]);
			words = words+1.0;
		}
	}
  if (words != 0) {
    score = score/words;
  }
	
	return score;
}